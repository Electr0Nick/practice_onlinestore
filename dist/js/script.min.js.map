{"version":3,"file":"script.min.js","mappings":"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","sources":["webpack://practice_onlinestore/./src/js/modules/is_webp_for_css.js","webpack://practice_onlinestore/./src/js/modules/dynamicAdapt.js","webpack://practice_onlinestore/./src/js/script.js"],"sourcesContent":["// проверяет, может ли браузер отобразить изображения формата webp\r\n// если да, то добавляет тегу body класс .webP\r\n// (работает в связке с GULP плагином gulp-webpcss)\r\nexport default function isWebp() {\r\n    function testWebP(callback) {\r\n        var webP = new Image();\r\n        webP.onload = webP.onerror = function () {\r\n            callback(webP.height == 2);\r\n        };\r\n        webP.src = \"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA\";\r\n    }\r\n    testWebP(function (support) {\r\n        let className = support === true ? 'webp' : 'no-webp';\r\n        document.documentElement.classList.add(className);\r\n    });\r\n}\r\n","/**\r\n * @typedef {Object} dNode\r\n * @property {HTMLElement} parent\r\n * @property {HTMLElement} element\r\n * @property {HTMLElement} to\r\n * @property {string} breakpoint\r\n * @property {string} order\r\n * @property {number} index\r\n */\r\n\r\n/**\r\n * @typedef {Object} dMediaQuery\r\n * @property {string} query\r\n * @property {number} breakpoint\r\n */\r\n\r\n/**\r\n * @param {'min' | 'max'} type\r\n */\r\nexport function useDynamicAdapt(type = 'max') {\r\n  const className = '_dynamic_adapt_'\r\n  const attrName = 'data-da'\r\n\r\n  /** @type {dNode[]} */\r\n  const dNodes = getDNodes()\r\n\r\n  /** @type {dMediaQuery[]} */\r\n  const dMediaQueries = getDMediaQueries(dNodes)\r\n\r\n  dMediaQueries.forEach((dMediaQuery) => {\r\n    const matchMedia = window.matchMedia(dMediaQuery.query)\r\n    // массив объектов с подходящим брейкпоинтом\r\n    const filteredDNodes = dNodes.filter(({ breakpoint }) => breakpoint === dMediaQuery.breakpoint)\r\n    const mediaHandler = getMediaHandler(matchMedia, filteredDNodes)\r\n    matchMedia.addEventListener('change', mediaHandler)\r\n\r\n    mediaHandler()\r\n  })\r\n\r\n  function getDNodes() {\r\n    const result = []\r\n    const elements = [...document.querySelectorAll(`[${attrName}]`)]\r\n\r\n    elements.forEach((element) => {\r\n      const attr = element.getAttribute(attrName)\r\n      const [toSelector, breakpoint, order] = attr.split(',').map((val) => val.trim())\r\n\r\n      const to = document.querySelector(toSelector)\r\n\r\n      if (to) {\r\n        result.push({\r\n          parent: element.parentElement,\r\n          element,\r\n          to,\r\n          breakpoint: breakpoint ?? '767',\r\n          order: order !== undefined ? (isNumber(order) ? Number(order) : order) : 'last',\r\n          index: -1,\r\n        })\r\n      }\r\n    })\r\n\r\n    return sortDNodes(result)\r\n  }\r\n\r\n  /**\r\n   * @param {dNode} items\r\n   * @returns {dMediaQuery[]}\r\n   */\r\n  function getDMediaQueries(items) {\r\n    const uniqItems = [...new Set(items.map(({ breakpoint }) => `(${type}-width: ${breakpoint}px),${breakpoint}`))]\r\n\r\n    return uniqItems.map((item) => {\r\n      const [query, breakpoint] = item.split(',')\r\n\r\n      return { query, breakpoint }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @param {MediaQueryList} matchMedia\r\n   * @param {dNodes} items\r\n   */\r\n  function getMediaHandler(matchMedia, items) {\r\n    return function mediaHandler() {\r\n      if (matchMedia.matches) {\r\n        items.forEach((item) => {\r\n          moveTo(item)\r\n        })\r\n\r\n        items.reverse()\r\n      } else {\r\n        items.forEach((item) => {\r\n          if (item.element.classList.contains(className)) {\r\n            moveBack(item)\r\n          }\r\n        })\r\n\r\n        items.reverse()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {dNode} dNode\r\n   */\r\n  function moveTo(dNode) {\r\n    const { to, element, order } = dNode\r\n    dNode.index = getIndexInParent(dNode.element, dNode.element.parentElement)\r\n    element.classList.add(className)\r\n\r\n    if (order === 'last' || order >= to.children.length) {\r\n      to.append(element)\r\n\r\n      return\r\n    }\r\n\r\n    if (order === 'first') {\r\n      to.prepend(element)\r\n\r\n      return\r\n    }\r\n\r\n    to.children[order].before(element)\r\n  }\r\n\r\n  /**\r\n   * @param {dNode} dNode\r\n   */\r\n  function moveBack(dNode) {\r\n    const { parent, element, index } = dNode\r\n    element.classList.remove(className)\r\n\r\n    if (index >= 0 && parent.children[index]) {\r\n      parent.children[index].before(element)\r\n    } else {\r\n      parent.append(element)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLElement} element\r\n   * @param {HTMLElement} parent\r\n   */\r\n  function getIndexInParent(element, parent) {\r\n    return [...parent.children].indexOf(element)\r\n  }\r\n\r\n  /**\r\n   * Функция сортировки массива по breakpoint и order\r\n   * по возрастанию для type = min\r\n   * по убыванию для type = max\r\n   *\r\n   * @param {dNode[]} items\r\n   */\r\n  function sortDNodes(items) {\r\n    const isMin = type === 'min' ? 1 : 0\r\n\r\n    return [...items].sort((a, b) => {\r\n      if (a.breakpoint === b.breakpoint) {\r\n        if (a.order === b.order) {\r\n          return 0\r\n        }\r\n\r\n        if (a.order === 'first' || b.order === 'last') {\r\n          return -1 * isMin\r\n        }\r\n\r\n        if (a.order === 'last' || b.order === 'first') {\r\n          return 1 * isMin\r\n        }\r\n\r\n        return 0\r\n      }\r\n\r\n      return (a.breakpoint - b.breakpoint) * isMin\r\n    })\r\n  }\r\n\r\n  function isNumber(value) {\r\n    return !isNaN(value)\r\n  }\r\n}\r\n","\"use strict\"\r\n\r\n// для сборки GULP: ------------------------------------- --------------------------------------\r\nimport isWebp from './modules/is_webp_for_css.js';\r\nisWebp();\r\n// для динамического адаптива ------------------------------------- ----------------------------\r\nimport { useDynamicAdapt } from './modules/dynamicAdapt.js'\r\nuseDynamicAdapt();\r\n\r\n\r\nconst activeClass = (el) => {\r\n  el.classList.toggle('active');\r\n}\r\n\r\n\r\n// бургер меню ------------------------------------- --------------------------------------- --\r\nconst menuButton = document.getElementById('menu-btn');\r\nconst menuNav = document.getElementById('menu-nav');\r\nconst addActiveForNav = () => {\r\n  activeClass(menuNav);\r\n  activeClass(menuButton);\r\n}\r\nmenuButton.addEventListener('click', addActiveForNav);\r\n\r\n\r\n// плавное открытие каталог-бара ------------------------------------- -------------------------\r\nconst catalogBar = document.getElementById('ctlg');\r\nconst catalogHead = document.getElementById('ctlg-head');\r\nconst catalogHeadStyles = getComputedStyle(catalogHead);\r\nconst сatalogButton = document.getElementById('ctlg-btn');\r\nconst catalogBody = document.getElementById('ctlg-body');\r\nconst arrCatalogBarLinks = document.querySelectorAll('.ctlg-body__link');\r\nconst catalogBarLinkStyles = getComputedStyle(arrCatalogBarLinks[0]);\r\nconst openCatalogBarHeight = parseInt(catalogHeadStyles.height) + arrCatalogBarLinks.length * parseInt(catalogBarLinkStyles.height);\r\nconst closeCatalogBarHeight = parseInt(catalogHeadStyles.height);\r\ncatalogBody.style.height = `${openCatalogBarHeight}px`;\r\nconst addActiveForCtlg = () => {\r\n    activeClass(catalogBar);\r\n    if (catalogBar.classList.contains('active')) {\r\n      catalogBar.style.height = `${openCatalogBarHeight}px`;\r\n    } else {\r\n      catalogBar.style.height = `${closeCatalogBarHeight}px`;\r\n    }\r\n  }\r\nсatalogButton.addEventListener('click', addActiveForCtlg);\r\n\r\n\r\n// плавное открытие правой панели каталог-бара ------------------------------------- ------------------------\r\nconst arrCatalogBarMenuItems = document.querySelectorAll('.ctlg-body__menu');\r\nfor (let i = 0; i < arrCatalogBarMenuItems.length; i++) {\r\n  const menuItem = arrCatalogBarMenuItems[i];\r\n  const itemPanel = menuItem.querySelector('.ctlg-panel');\r\n  menuItem.addEventListener('mouseenter', function(){\r\n    itemPanel.classList.add('active');\r\n  });\r\n  menuItem.addEventListener('mouseleave', function(){\r\n    itemPanel.classList.remove('active');\r\n  });\r\n}\r\n\r\n\r\n// плавное открытие списка категорий поиска ------------------------------------- --------------------------------------- --\r\nconst searchOptions = document.getElementById('srch-options');\r\nconst searchArrows = document.getElementById('srch-arrows');\r\nconst searchList = document.getElementById('srch-list');\r\nconst addActiveForSearchList = () => {\r\n  activeClass(searchList);\r\n  activeClass(searchArrows);\r\n}\r\nsearchOptions.addEventListener('click', addActiveForSearchList);\r\n\r\n\r\n// плавное открытие списка категорий поиска ------------------------------------- --------------------------------------- --\r\nconst searchCategories = document.getElementById('srch-categories');\r\nconst arrSearchCheckboxes = document.querySelectorAll('.search-block__checkbox');\r\nconst addAmountOfCategories = () => {\r\n  let categoryCounterYes = 0;\r\n  let categoryCounterNo = arrSearchCheckboxes.length;\r\n  for (let i = 0; i < arrSearchCheckboxes.length; i++) {\r\n    if (arrSearchCheckboxes[i].checked) {\r\n      categoryCounterYes++;\r\n      categoryCounterNo--;\r\n    }\r\n  }\r\n  if (categoryCounterYes) {\r\n    if (categoryCounterNo) {\r\n      searchCategories.innerHTML = `Категорий: ${categoryCounterYes}`;\r\n      searchCategories.style.color = '#f68038';\r\n    } else {\r\n      searchCategories.innerHTML = `Везде`;\r\n      searchCategories.style.color = '#999999';\r\n    }\r\n  } else {\r\n    searchCategories.innerHTML = `Везде`;\r\n    searchCategories.style.color = '#999999';\r\n  }\r\n}\r\nfor (let i = 0; i < arrSearchCheckboxes.length; i++) {\r\n  const checkbox = arrSearchCheckboxes[i];\r\n  checkbox.addEventListener('click', addAmountOfCategories)\r\n}"],"names":["callback","webP","support","className","document","documentElement","classList","add","Image","onload","onerror","height","src","type","attrName","dNodes","result","querySelectorAll","forEach","element","attr","getAttribute","toSelector","breakpoint","order","split","map","val","trim","to","querySelector","value","push","parent","parentElement","undefined","isNaN","Number","index","items","isMin","sort","a","b","sortDNodes","getDNodes","Set","item","query","dMediaQuery","matchMedia","window","mediaHandler","matches","dNode","children","indexOf","getIndexInParent","length","append","before","prepend","moveTo","reverse","contains","remove","moveBack","getMediaHandler","filter","addEventListener","useDynamicAdapt","activeClass","el","toggle","menuButton","getElementById","menuNav","catalogBar","catalogHead","catalogHeadStyles","getComputedStyle","catalogBody","arrCatalogBarLinks","catalogBarLinkStyles","openCatalogBarHeight","parseInt","closeCatalogBarHeight","style","arrCatalogBarMenuItems","i","menuItem","itemPanel","searchOptions","searchArrows","searchList","searchCategories","arrSearchCheckboxes","addAmountOfCategories","categoryCounterYes","categoryCounterNo","checked","innerHTML","color"],"sourceRoot":""}